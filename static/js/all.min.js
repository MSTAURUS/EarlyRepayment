!function(e){e.fn.inputFilter=function(e){return this.on("input mousedown mouseup select contextmenu drop",function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))})},e.fn.extend({formatFeild:function(t){var i=e(this),a=function(e,t){for(var i=["й","ц","у","к","е","н","г","ш","щ","з","х","ъ","ф","ы","в","а","п","р","о","л","д","ж","э","я","ч","с","м","и","т","ь","б","ю"],a=["q","w","e","r","t","y","u","i","o","p","\\[","\\]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m",",","\\."],n=0;n<a.length;n++)if("toRu"===t){var r=new RegExp(a[n],"mig");e=e.replace(r,function(e){return e==e.toLowerCase()?i[n]:i[n].toUpperCase()})}else if("toEn"===t){r=new RegExp(i[n],"mig");e=e.replace(r,function(e){return e==e.toLowerCase()?a[n]:a[n].toUpperCase()})}return e},n=function(e){for(var t="",i=!0,a=0;a<e.length;a++)" "==e[a]||"-"==e[a]?(i=!0,t+=e[a]):i?(t+=e[a].toUpperCase(),i=!1):(t+=e[a].toLowerCase(),i=!1);return t},r=function(e){return e=e.toUpperCase()};i.on("change",function(t){var i=e(t.target);i.val(i.val().trim())}),i.on("input keydown keyup mousedown select contextmenu drop",function(i){var s=e(i.target);t.layout&&s.val(a(s.val(),t.layout)),!0===t.titleCase&&(this.value=this.value.replace(/\s{2,}/g," ").replace(/\-{2,}/g,"-").replace(/\-\s/g," ").replace(/\s\-/g," ").replace(/^\-?/,"").replace(/[^а-яёЁА-Я\- ]/gim,""),s.val(n(s.val()))),!0===t.upperCase&&s.val(r(s.val())),!0===t.integerPositive&&s.inputFilter(function(e){return/^\d*$/.test(e)}),!0===t.integer&&s.inputFilter(function(e){return/^-?\d*$/.test(e)}),t.decimals&&(s.inputFilter(function(e){return/^-?\d*[.,]?\d*$/.test(e)}),e.isNumeric(t.decimals)&&s.on("change",function(){s.val(s.val().replace(",","."));var e=parseFloat(parseFloat(s.val()).toFixed(t.decimals));s.val(e),s.val(s.val().replace(".",t.pointing))})),!0===t.lettersOnly&&s.inputFilter(function(e){return/^[a-zа-я\s]*$/i.test(e)}),!0===t.noSpaces&&s.val(s.val().replace(" ",""))})}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t,i=navigator.userAgent,a=/iphone/i.test(i),n=/chrome/i.test(i),r=/android/i.test(i);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var i;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&((i=this.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(i=document.selection.createRange(),e=0-i.duplicate().moveStart("character",-1e5),t=e+i.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(i,s){var o,l,u,d,h,c,m;if(!i&&this.length>0){var f=e(this[0]).data(e.mask.dataName);return f?f():void 0}return s=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},s),o=e.mask.definitions,l=[],u=c=i.length,d=null,e.each(i.split(""),function(e,t){"?"==t?(c--,u=e):o[t]?(l.push(new RegExp(o[t])),null===d&&(d=l.length-1),u>e&&(h=l.length-1)):l.push(null)}),this.trigger("unmask").each(function(){function f(){if(s.completed){for(var e=d;h>=e;e++)if(l[e]&&C[e]===g(e))return;s.completed.call(w)}}function g(e){return s.placeholder.charAt(e<s.placeholder.length?e:0)}function p(e){for(;++e<c&&!l[e];);return e}function v(e,t){var i,a;if(!(0>e)){for(i=e,a=p(t);c>i;i++)if(l[i]){if(!(c>a&&l[i].test(C[a])))break;C[i]=C[a],C[a]=g(a),a=p(a)}k(),w.caret(Math.max(d,e))}}function b(){x(),w.val()!=q&&w.change()}function y(e,t){var i;for(i=e;t>i&&c>i;i++)l[i]&&(C[i]=g(i))}function k(){w.val(C.join(""))}function x(e){var t,i,a,n=w.val(),r=-1;for(t=0,a=0;c>t;t++)if(l[t]){for(C[t]=g(t);a++<n.length;)if(i=n.charAt(a-1),l[t].test(i)){C[t]=i,r=t;break}if(a>n.length){y(t+1,c);break}}else C[t]===n.charAt(a)&&a++,u>t&&(r=t);return e?k():u>r+1?s.autoclear||C.join("")===F?(w.val()&&w.val(""),y(0,c)):k():(k(),w.val(w.val().substring(0,r+1))),u?t:d}var w=e(this),C=e.map(i.split(""),function(e,t){return"?"!=e?o[e]?g(t):e:void 0}),F=C.join(""),q=w.val();w.data(e.mask.dataName,function(){return e.map(C,function(e,t){return l[t]&&e!=g(t)?e:null}).join("")}),w.one("unmask",function(){w.off(".mask").removeData(e.mask.dataName)}).on("focus.mask",function(){var e;w.prop("readonly")||(clearTimeout(t),q=w.val(),e=x(),t=setTimeout(function(){w.get(0)===document.activeElement&&(k(),e==i.replace("?","").length?w.caret(0,e):w.caret(e))},10))}).on("blur.mask",b).on("keydown.mask",function(e){if(!w.prop("readonly")){var t,i,n,r=e.which||e.keyCode;m=w.val(),8===r||46===r||a&&127===r?(i=(t=w.caret()).begin,(n=t.end)-i==0&&(i=46!==r?function(e){for(;--e>=0&&!l[e];);return e}(i):n=p(i-1),n=46===r?p(n):n),y(i,n),v(i,n-1),e.preventDefault()):13===r?b.call(this,e):27===r&&(w.val(q),w.caret(0,x()),e.preventDefault())}}).on("keypress.mask",function(t){if(!w.prop("readonly")){var i,a,n,s=t.which||t.keyCode,o=w.caret();t.ctrlKey||t.altKey||t.metaKey||32>s||!s||13===s||(o.end-o.begin!=0&&(y(o.begin,o.end),v(o.begin,o.end-1)),i=p(o.begin-1),c>i&&(a=String.fromCharCode(s),l[i].test(a))&&(function(e){var t,i,a,n;for(t=e,i=g(e);c>t;t++)if(l[t]){if(a=p(t),n=C[t],C[t]=i,!(c>a&&l[a].test(n)))break;i=n}}(i),C[i]=a,k(),n=p(i),r?setTimeout(function(){e.proxy(e.fn.caret,w,n)()},0):w.caret(n),o.begin<=h&&f()),t.preventDefault())}}).on("input.mask paste.mask",function(){w.prop("readonly")||setTimeout(function(){var e=x(!0);w.caret(e),f()},0)}),n&&r&&w.off("input.mask").on("input.mask",function(){var e=w.val(),t=w.caret();if(m&&m.length&&m.length>e.length){for(x(!0);t.begin>0&&!l[t.begin-1];)t.begin--;if(0===t.begin)for(;t.begin<d&&!l[t.begin];)t.begin++;w.caret(t.begin,t.begin)}else{for(x(!0);t.begin<c&&!l[t.begin];)t.begin++;w.caret(t.begin,t.begin)}f()}),x()})}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget,e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function a(){var a,n;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(a=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(n=i.settings.submitHandler.call(i,i.currentForm,t),a&&a.remove(),void 0!==n&&n)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,a()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):a():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i,a;return e(this[0]).is("form")?t=this.validate().form():(a=[],t=!0,i=e(this[0].form).validate(),this.each(function(){(t=i.element(this)&&t)||(a=a.concat(i.errorList))}),i.errorList=a),t},rules:function(t,i){var a,n,r,s,o,l,u=this[0],d=void 0!==this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=u&&(!u.form&&d&&(u.form=this.closest("form")[0],u.name=this.attr("name")),null!=u.form)){if(t)switch(n=(a=e.data(u.form,"validator").settings).rules,r=e.validator.staticRules(u),t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,n[u.name]=r,i.messages&&(a.messages[u.name]=e.extend(a.messages[u.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),function(e,t){l[t]=r[t],delete r[t]}),l):(delete n[u.name],r)}return(s=e.validator.normalizeRules(e.extend({},e.validator.classRules(u),e.validator.attributeRules(u),e.validator.dataRules(u),e.validator.staticRules(u)),u)).required&&(o=s.required,delete s.required,s=e.extend({required:o},s)),s.remote&&(o=s.remote,delete s.remote,s=e.extend(s,{remote:o})),s}}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:void 0===i?t:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,a){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(a):e(t).addClass(i).removeClass(a)},unhighlight:function(t,i,a){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(a):e(t).removeClass(i).addClass(a)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"Обязательно",remote:"Некорректное значение",email:"Некорректный e-mail",url:"Некорректный URL",date:"Некорректная дата",dateISO:"Некорректная дата",equalTo:"Поля не совпадают",maxlength:e.validator.format("Не более {0} символов"),minlength:e.validator.format("Не менее {0} символов"),rangelength:e.validator.format("Не менее {0} и не более {1} символов"),range:e.validator.format("Введите число в промежутке {0} и {1}"),max:e.validator.format("Не более {0}"),min:e.validator.format("Не менее {0}"),step:e.validator.format("Введите число кратное {0}.")},autoCreateRanges:!1,prototype:{init:function(){this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t,i=this.currentForm,a=this.groups={};function n(t){var a=void 0!==e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");if(!this.form&&a&&(this.form=e(this).closest("form")[0],this.name=e(this).attr("name")),i===this.form){var n=e.data(this.form,"validator"),r="on"+t.type.replace(/^validate/,""),s=n.settings;s[r]&&!e(this).is(s.ignore)&&s[r].call(n,this,t)}}e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){a[i]=t})}),t=this.settings.rules,e.each(t,function(i,a){t[i]=e.validator.normalizeRule(a)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",n).on("click.validate","select, option, [type='radio'], [type='checkbox']",n),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i,a,n=this.clean(t),r=this.validationTargetFor(n),s=this,o=!0;return void 0===r?delete this.invalid[n.name]:(this.prepareElement(r),this.currentElements=e(r),(a=this.groups[r.name])&&e.each(this.groups,function(e,t){t===a&&e!==r.name&&(n=s.validationTargetFor(s.clean(s.findByName(e))))&&n.name in s.invalid&&(s.currentElements.push(n),o=s.check(n)&&o)}),i=!1!==this.check(r),o=o&&i,this.invalid[r.name]=!i,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!i)),o},showErrors:function(t){if(t){var i=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:i.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)void 0!==e[t]&&null!==e[t]&&!1!==e[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var a=this.name||e(this).attr("name"),n=void 0!==e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");return!a&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),n&&(this.form=e(this).closest("form")[0],this.name=a),this.form===t.currentForm&&(!(a in i||!t.objectLength(e(this).rules()))&&(i[a]=!0,!0))})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,a,n=e(t),r=t.type,s=void 0!==n.attr("contenteditable")&&"false"!==n.attr("contenteditable");return"radio"===r||"checkbox"===r?this.findByName(t.name).filter(":checked").val():"number"===r&&void 0!==t.validity?t.validity.badInput?"NaN":n.val():(i=s?n.text():n.val(),"file"===r?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(a=i.lastIndexOf("/"))>=0?i.substr(a+1):(a=i.lastIndexOf("\\"))>=0?i.substr(a+1):i:"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,a,n,r,s=e(t).rules(),o=e.map(s,function(e,t){return t}).length,l=!1,u=this.elementValue(t);for(a in"function"==typeof s.normalizer?r=s.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(u=r.call(t,u),delete s.normalizer),s){n={method:a,parameters:s[a]};try{if("dependency-mismatch"===(i=e.validator.methods[a].call(this,u,t,n.parameters))&&1===o){l=!0;continue}if(l=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!l)return this.objectLength(s)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){"string"==typeof i&&(i={method:i});var a=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof a?a=a.call(this,i.parameters,t):n.test(a)&&(a=e.validator.format(a.replace(n,"{$1}"),i.parameters)),a},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var a,n,r,s,o=this.errorsFor(t),l=this.idOrName(t),u=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(i)):(a=o=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(a=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(a):this.settings.errorPlacement?this.settings.errorPlacement.call(this,a,e(t)):a.insertAfter(t),o.is("label")?o.attr("for",l):0===o.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(r=o.attr("id"),u?u.match(new RegExp("\\b"+this.escapeCssMeta(r)+"\\b"))||(u+=" "+r):u=r,e(t).attr("aria-describedby",u),(n=this.groups[t.name])&&(s=this,e.each(s.groups,function(t,i){i===n&&e("[name='"+s.escapeCssMeta(t)+"']",s.currentForm).attr("aria-describedby",o.attr("id"))})))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var i=this.escapeCssMeta(this.idOrName(t)),a=e(t).attr("aria-describedby"),n="label[for='"+i+"'], label[for='"+i+"'] *";return a&&(n=n+", #"+this.escapeCssMeta(a).replace(/\s+/g,", #")),this.errors().filter(n)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.submitButton&&e("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return i="string"==typeof i&&i||"remote",e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},a=e(t).attr("class");return a&&e.each(a.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,a){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(a=Number(a),isNaN(a)&&(a=void 0)),a||0===a?e[i]=a:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,a,n={},r=e(t),s=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(a=t.getAttribute(i))&&(a=!0),a=!!a):a=r.attr(i),this.normalizeAttributeRule(n,s,i,a);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var i,a,n={},r=e(t),s=t.getAttribute("type");for(i in e.validator.methods)""===(a=r.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()))&&(a=!0),this.normalizeAttributeRule(n,s,i,a);return n},staticRules:function(t){var i={},a=e.data(t.form,"validator");return a.settings.rules&&(i=e.validator.normalizeRule(a.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(a,n){if(!1!==n){if(n.param||n.depends){var r=!0;switch(typeof n.depends){case"string":r=!!e(n.depends,i.form).length;break;case"function":r=n.depends.call(i,i)}r?t[a]=void 0===n.param||n.param:(e.data(i.form,"validator").resetElements(e(i)),delete t[a])}}else delete t[a]}),e.each(t,function(a,n){t[a]=e.isFunction(n)&&"normalizer"!==a?n(i):n}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,a){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==a?a:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,a){if(!this.depend(a,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var n=e(i).val();return n&&n.length>0}return this.checkable(i)?this.getLength(t,i)>0:null!=t&&t.length>0},email:function(e,t){return this.optional(t)||/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|su|abogado|ac|academy|accountant|accountants|actor|ad|adult|ru|ae|aero|af|africa|ag|agency|ai|airforce|al|am|apartments|app|aq|army|art|as|asia|associates|at|attorney|auction|audio|auto|aw|ax|az|ba|baby|band|bank|bar|bargains|bayern|be|beer|berlin|best|bet|bg|bh|bi|bid|bike|bingo|bio|biz|bj|black|blackfriday|blog|blue|bm|bo|boutique|broker|brussels|bs|bt|build|builders|business|buzz|bz|ca|cab|cafe|cam|camera|camp|capital|car|cards|care|career|careers|cars|casa|cash|casino|cat|catering|cc|cd|center|ceo|cf|cg|ch|charity|chat|cheap|christmas|church|ci|city|cl|claims|cleaning|click|clinic|clothing|cloud|club|cm|cn|co|ao|bw|ck|fk|id|il|in|ke|ls|mz|no|nz|th|tz|uk|uz|za|zm|zw|coach|codes|coffee|college|cologne|com|ar|au|bd|bn|br|eg|et|fj|gh|gn|gt|gu|hk|jm|kh|kw|lb|lr|mt|mv|ng|ni|np|nr|om|pa|pl|py|qa|sa|sb|sg|sv|sy|tr|tw|ua|uy|ve|vi|vn|ye|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|coupons|courses|cr|credit|creditcard|cricket|cruises|cu|cx|cz|dance|date|dating|de|deals|degree|delivery|democrat|dental|dentist|desi|design|dev|diamonds|diet|digital|direct|directory|discount|dj|dk|dm|do|doctor|dog|domains|download|dz|earth|ec|education|ee|email|energy|engineer|engineering|enterprises|equipment|es|estate|eu|events|example|exchange|expert|exposed|express|fail|faith|family|fan|fans|farm|fashion|fi|film|finance|financial|fish|fishing|fit|fitness|flights|florist|flowers|fm|fo|football|forex|forsale|foundation|fr|fun|fund|furniture|futbol|fyi|ga|gallery|game|games|garden|gd|ge|gent|gf|gg|gi|gift|gifts|gives|gl|glass|global|gm|gmbh|gold|golf|gp|gr|graphics|gratis|green|gripe|group|gs|guide|guitars|guru|gy|haus|healthcare|help|hiphop|hm|hn|hockey|holdings|holiday|homes|horse|hospital|host|hosting|house|how|hr|ht|hu|ie|im|immo|immobilien|industries|info|ink|institute|insure|international|investments|io|ir|irish|is|it|je|jewelry|jo|jobs|jp|juegos|kaufen|kg|ki|kim|kitchen|kiwi|kn|kr|ky|kz|la|land|law|lawyer|lc|lease|legal|lgbt|li|life|lighting|limited|limo|link|live|lk|llc|loan|loans|lol|london|love|lt|ltd|lu|luxe|luxury|lv|ly|ma|maison|management|market|marketing|mba|mc|md|me|media|memorial|men|menu|mg|miami|mk|mn|mo|mobi|moda|moe|mom|money|monster|mortage|mortgage|moscow|movie|mp|ms|mu|mw|mx|my|na|name|navy|nc|net|network|news|nf|ninja|nl|nu|observer|one|onl|online|ooo|org|page|paris|partners|parts|party|pe|pet|ph|photo|photography|photos|pics|pictures|pink|pizza|pk|plumbing|plus|pn|poker|porn|pr|press|pro|productions|promo|properties|property|protection|ps|pt|pub|pw|qpon|racing|radio|re|realty|recipes|red|rehab|reisen|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rich|rip|ro|rocks|rodeo|rs|run|rw|sale|salon|sarl|sc|school|schule|science|se|security|services|sex|sexy|sh|shiksha|shoes|shop|shopping|show|si|singles|site|sk|ski|sl|sm|sn|so|soccer|social|software|solar|solutions|soy|space|sport|sr|st|store|stream|studio|study|style|sucks|supplies|supply|support|surf|surgery|sx|systems|sz|tatar|tattoo|tax|taxi|tc|td|team|tech|technology|tel|tennis|testone|tg|theater|theatre|tickets|tienda|tips|tires|tirol|tj|tk|tl|tm|tn|to|today|tools|top|tours|town|toys|trade|trading|training|travel|tt|tube|tv|ug|university|uno|us|vacations|vc|vegas|ventures|vet|vg|viajes|video|villas|vin|vip|vision|vodka|vote|voting|voto|voyage|vu|watch|webcam|website|wedding|wien|wiki|win|wine|work|works|world|ws|wtf|xxx|xyz|yoga|zone|by)\b/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},minlength:function(t,i,a){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=a},maxlength:function(t,i,a){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n<=a},rangelength:function(t,i,a){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=a[0]&&n<=a[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(t,i,a){var n,r=e(i).attr("type"),s="Step attribute on input type "+r+" is not supported.",o=new RegExp("\\b"+r+"\\b"),l=function(e){var t=(""+e).match(/(?:\.(\d+))?$/);return t&&t[1]?t[1].length:0},u=function(e){return Math.round(e*Math.pow(10,n))},d=!0;if(r&&!o.test(["text","number","range"].join()))throw new Error(s);return n=l(a),(l(t)>n||u(t)%u(a)!=0)&&(d=!1),this.optional(i)||d},equalTo:function(t,i,a){var n=e(a);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(i).valid()}),t===n.val()},remote:function(t,i,a,n){if(this.optional(i))return"dependency-mismatch";n="string"==typeof n&&n||"remote";var r,s,o,l=this.previousValue(i,n);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][n],this.settings.messages[i.name][n]=l.message,a="string"==typeof a&&{url:a}||a,o=e.param(e.extend({data:t},a.data)),l.old===o?l.valid:(l.old=o,r=this,this.startRequest(i),(s={})[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:s,context:r.currentForm,success:function(e){var a,s,o,u=!0===e||"true"===e;r.settings.messages[i.name][n]=l.originalMessage,u?(o=r.formSubmitted,r.resetInternals(),r.toHide=r.errorsFor(i),r.formSubmitted=o,r.successList.push(i),r.invalid[i.name]=!1,r.showErrors()):(a={},s=e||r.defaultMessage(i,{method:n,parameters:t}),a[i.name]=l.message=s,r.invalid[i.name]=!0,r.showErrors(a)),l.valid=u,r.stopRequest(i,u)}},a)),"pending")}}});var t,i={};return e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,a){var n=e.port;"abort"===e.mode&&(i[n]&&i[n].abort(),i[n]=a)}):(t=e.ajax,e.ajax=function(a){var n=("mode"in a?a:e.ajaxSettings).mode,r=("port"in a?a:e.ajaxSettings).port;return"abort"===n?(i[r]&&i[r].abort(),i[r]=t.apply(this,arguments),i[r]):t.apply(this,arguments)}),e}),function(e){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){return e.validator.addMethod("accept",function(t,i,a){var n,r,s="string"==typeof a?a.replace(/\s/g,""):"image/*",o=this.optional(i);if(o)return o;if("file"===e(i).attr("type")&&(s=s.replace(/[\-\[\]\/\{\}\(\)\+\?\.\\\^\$\|]/g,"\\$&").replace(/,/g,"|").replace(/\/\*/g,"/.*"),i.files&&i.files.length))for(r=new RegExp(".?("+s+")$","i"),n=0;n<i.files.length;n++)if(!i.files[n].type.match(r))return!1;return!0},e.validator.format("Please enter a value with a valid mimetype.")),e.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^\w+$/i.test(e)},"Только буквы, числа и подчеркивания"),e.validator.addMethod("ipv4",function(e,t){return this.optional(t)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)},"Некорректный IP v4 адрес"),e.validator.addMethod("ipv6",function(e,t){return this.optional(t)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)},"Некорректный IP v6 адрес"),e.validator.addMethod("maxfiles",function(t,i,a){return!!this.optional(i)||!("file"===e(i).attr("type")&&i.files&&i.files.length>a)},e.validator.format("Не более {0} файлов")),e.validator.addMethod("maxsize",function(t,i,a){if(this.optional(i))return!0;if("file"===e(i).attr("type")&&i.files&&i.files.length)for(var n=0;n<i.files.length;n++)if(i.files[n].size>a)return!1;return!0},e.validator.format("Размер каждого файла не должен превышать {0} байтов")),e.validator.addMethod("maxsizetotal",function(t,i,a){if(this.optional(i))return!0;if("file"===e(i).attr("type")&&i.files&&i.files.length)for(var n=0,r=0;r<i.files.length;r++)if((n+=i.files[r].size)>a)return!1;return!0},e.validator.format("Общий размер не должен превышать {0} байтов")),e.validator.addMethod("notEqualTo",function(t,i,a){return this.optional(i)||!e.validator.methods.equalTo.call(this,t,i,a)},"Значения не могут быть одинаковыми"),e.validator.addMethod("pattern",function(e,t,i){return!!this.optional(t)||("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(e))},"Некорректный ввод"),e.validator.addMethod("require_from_group",function(t,i,a){var n=e(a[1],i.form),r=n.eq(0),s=r.data("valid_req_grp")?r.data("valid_req_grp"):e.extend({},this),o=n.filter(function(){return s.elementValue(this)}).length>=a[0];return r.data("valid_req_grp",s),e(i).data("being_validated")||(n.data("being_validated",!0),n.each(function(){s.element(this)}),n.data("being_validated",!1)),o},e.validator.format("Не менее {0} полей должны быть заполнены")),e.validator.addMethod("skip_or_fill_minimum",function(t,i,a){var n=e(a[1],i.form),r=n.eq(0),s=r.data("valid_skip")?r.data("valid_skip"):e.extend({},this),o=n.filter(function(){return s.elementValue(this)}).length,l=0===o||o>=a[0];return r.data("valid_skip",s),e(i).data("being_validated")||(n.data("being_validated",!0),n.each(function(){s.element(this)}),n.data("being_validated",!1)),l},e.validator.format("Заполните не менее {0} полей, либо пропустите")),e}),function(e){var t=e("[data-mask=fio]"),i=e("[data-mask=phone]"),a=e("[data-mask=email]"),n=e("[data-mask=letters]"),r=e("[data-mask=digits]"),s=e("[data-mask=decimals]");e("form.validate").each(function(){e(this).validate()}),e(".required").rules("add",{required:!0}),t.formatFeild({titleCase:!0,layout:"toRu"}),t.rules("add",{minlength:2,maxlength:100}),i.mask("+7 (999) 999 99 99"),n.formatFeild({lettersOnly:!0}),r.formatFeild({integer:!0}),s.formatFeild({decimals:"3"}),a.formatFeild({layout:"toEn",noSpaces:!0}),a.rules("add",{email:!0,maxlength:100}),e(document).on("blur","input,select,textarea",function(){var t=e(this),i=e(this).parents("form");e.data(i[0],"validator")&&setTimeout(function(){t.valid()},1)})}(jQuery);