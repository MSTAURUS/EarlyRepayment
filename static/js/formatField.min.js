!function(e){e.fn.inputFilter=function(e){return this.on("input mousedown mouseup select contextmenu drop",function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))})},e.fn.extend({formatFeild:function(t){var a=e(this),n=function(e,t){for(var a=["й","ц","у","к","е","н","г","ш","щ","з","х","ъ","ф","ы","в","а","п","р","о","л","д","ж","э","я","ч","с","м","и","т","ь","б","ю"],n=["q","w","e","r","t","y","u","i","o","p","\\[","\\]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m",",","\\."],i=0;i<n.length;i++)if("toRu"===t){var l=new RegExp(n[i],"mig");e=e.replace(l,function(e){return e==e.toLowerCase()?a[i]:a[i].toUpperCase()})}else if("toEn"===t){l=new RegExp(a[i],"mig");e=e.replace(l,function(e){return e==e.toLowerCase()?n[i]:n[i].toUpperCase()})}return e},i=function(e){for(var t="",a=!0,n=0;n<e.length;n++)" "==e[n]||"-"==e[n]?(a=!0,t+=e[n]):a?(t+=e[n].toUpperCase(),a=!1):(t+=e[n].toLowerCase(),a=!1);return t},l=function(e){return e=e.toUpperCase()};a.on("change",function(t){var a=e(t.target);a.val(a.val().trim())}),a.on("input keydown keyup mousedown select contextmenu drop",function(a){var r=e(a.target);t.layout&&r.val(n(r.val(),t.layout)),!0===t.titleCase&&(this.value=this.value.replace(/\s{2,}/g," ").replace(/\-{2,}/g,"-").replace(/\-\s/g," ").replace(/\s\-/g," ").replace(/^\-?/,"").replace(/[^а-яёЁА-Я\- ]/gim,""),r.val(i(r.val()))),!0===t.upperCase&&r.val(l(r.val())),!0===t.integerPositive&&r.inputFilter(function(e){return/^\d*$/.test(e)}),!0===t.integer&&r.inputFilter(function(e){return/^-?\d*$/.test(e)}),t.decimals&&(r.inputFilter(function(e){return/^-?\d*[.,]?\d*$/.test(e)}),e.isNumeric(t.decimals)&&r.on("change",function(){r.val(r.val().replace(",","."));var e=parseFloat(parseFloat(r.val()).toFixed(t.decimals));r.val(e),r.val(r.val().replace(".",t.pointing))})),!0===t.lettersOnly&&r.inputFilter(function(e){return/^[a-zа-я\s]*$/i.test(e)}),!0===t.noSpaces&&r.val(r.val().replace(" ",""))})}})}(jQuery),function(e){var t=e("[data-mask=fio]"),a=e("[data-mask=phone]"),n=e("[data-mask=email]"),i=e("[data-mask=letters]"),l=e("[data-mask=digits]"),r=e("[data-mask=decimals]");e("form.validate").each(function(){e(this).validate()}),e(".required").rules("add",{required:!0}),t.formatFeild({titleCase:!0,layout:"toRu"}),t.rules("add",{minlength:2,maxlength:100}),a.mask("+7 (999) 999 99 99"),i.formatFeild({lettersOnly:!0}),l.formatFeild({integer:!0}),r.formatFeild({decimals:"3"}),n.formatFeild({layout:"toEn",noSpaces:!0}),n.rules("add",{email:!0,maxlength:100}),e(document).on("blur","input,select,textarea",function(){var t=e(this),a=e(this).parents("form");e.data(a[0],"validator")&&setTimeout(function(){t.valid()},1)})}(jQuery);